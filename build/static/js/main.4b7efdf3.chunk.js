(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),i=n.n(r),a=n(15),o=n.n(a),s=n(3),u=n(5),j=n.n(u),d="/api/phonebook",b={getAll:function(){return j.a.get(d).then((function(e){return e.data}))},createObj:function(e){return j.a.post(d,e).then((function(e){return e.data}))},deleteObj:function(e){return j.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},updateObj:function(e){return j.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))}},l=n(4),f=function(e){var t=e.persons,n=e.fields,r=e.setFields,i=e.setMatchedName;return Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{name:"name",value:n.name,onChange:function(e){var c=e.target.value,a=t.filter((function(e){return e.name===c})).length>0;i(a),r(Object(l.a)(Object(l.a)({},n),{},{name:c}))}})]})},h=function(e){var t=e.fields,n=e.setFields;return Object(c.jsxs)("div",{children:["phone: ",Object(c.jsx)("input",{type:"tel",name:"number",pattern:"[0-9-]{5,}",value:t.number,onChange:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{number:e.target.value}))}})]})},O=function(e){var t=e.notification,n=e.setNotification;return Object(r.useEffect)((function(){return setTimeout((function(){return n(null)}),5e3)})),null==t?null:Object(c.jsx)("div",{className:t.type,children:t.message})},m=function(e){var t=e.persons,n=e.setPersons,i=e.notification,a=e.setNotification,o=Object(r.useState)({name:"",number:""}),u=Object(s.a)(o,2),j=u[0],d=u[1],m=Object(r.useState)(!1),p=Object(s.a)(m,2),x=p[0],v=p[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(O,{notification:i,setNotification:a}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:e.target[0].value,number:e.target[1].value},r=t.filter((function(e){return e.name===c.name}));if(r.length>0){var i="".concat(c.name," is already in the phonebook.\n")+"Are you sure you want to replace the number with a new one?";if(window.confirm(i)){var o=r[0],s=Object(l.a)(Object(l.a)({},o),{},{number:c.number});b.updateObj(s).then((function(e){n(t.map((function(t){return t.id===e.id?e:t}))),a({type:"notification",message:"".concat(e.name,"'s phone was updated")})})).catch((function(e){return a({type:"error",message:e})}))}}else b.createObj(c).then((function(e){n(t.concat(e)),a({type:"notification",message:"".concat(e.name,"'s phone was added")})})).catch((function(e){return a({type:"error",message:e})}));d({name:"",number:""}),v(!1)},children:[Object(c.jsx)(f,{fields:j,setFields:d,persons:t,setMatchedName:v}),Object(c.jsx)(h,{fields:j,setFields:d}),Object(c.jsx)("div",{className:"submit-button",children:Object(c.jsx)("button",{type:"submit",children:x?"Update":"Add"})})]})]})},p=function(e){var t=e.filter,n=e.setFilter;return Object(c.jsxs)("div",{children:["Filter names: ",Object(c.jsx)("input",{name:"filter",value:t,onChange:function(e){var t=e.target.value.toLowerCase();n(t)}})]})},x=function(e){var t=e.deletePerson;return Object(c.jsx)("button",{onClick:t,children:"delete"})},v=function(e){var t=e.person,n=e.deletePerson;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.name}),Object(c.jsx)("td",{children:t.number}),Object(c.jsx)("td",{children:Object(c.jsx)(x,{deletePerson:function(){return n(t)}})})]})},g=function(e){var t=e.persons,n=e.setPersons,i=e.setNotification,a=Object(r.useState)(""),o=Object(s.a)(a,2),u=o[0],j=o[1],d=t.filter((function(e){return e.name.toLowerCase().includes(u)})),l=function(e){window.confirm("Delete ".concat(e.name,"?"))&&b.deleteObj(e.id).then((function(){n(t.filter((function(t){return t.id!==e.id}))),i({type:"notification",message:"".concat(e.name," was deleted")})})).catch((function(c){i({type:"error",message:"".concat(e.name," was already removed")}),n(t.filter((function(t){return t.id!==e.id})))}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phones"}),Object(c.jsx)(p,{filter:u,setFilter:j}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Name"}),Object(c.jsx)("th",{children:"Number"}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:d.map((function(e){return Object(c.jsx)(v,{person:e,deletePerson:l},e.name)}))})]})]})},w=(n(39),function(){var e=Object(r.useState)([{name:"",number:""}]),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(null),o=Object(s.a)(a,2),u=o[0],j=o[1];return Object(r.useEffect)((function(){b.getAll().then((function(e){return i(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(m,{persons:n,setPersons:i,notification:u,setNotification:j}),Object(c.jsx)(g,{persons:n,setPersons:i,setNotification:j})]})}),y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root")),y()}},[[40,1,2]]]);
//# sourceMappingURL=main.4b7efdf3.chunk.js.map